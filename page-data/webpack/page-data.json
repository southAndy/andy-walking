{"componentChunkName":"component---src-templates-blog-post-js","path":"/webpack/","result":{"data":{"site":{"siteMetadata":{"title":"Andy Walking"}},"markdownRemark":{"id":"7a7465e8-7348-5800-96f4-9122a91b52fc","excerpt":"####### tags:  每個  都會有以下的架構： 這些就是 webpack 中的 core-concept ，理解它們才能理解 webpack 究竟幫忙做了哪些事，那我們開始吧： Entry 引入自官方文件 An entry point indicates which module webpack should…","html":"<p>####### tags: <code class=\"language-text\">webpack</code></p>\n<p>每個 <code class=\"language-text\">webpack.config.js</code> 都會有以下的架構：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    module<span class=\"token punctuation\">.</span>export <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">loaders</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        browser<span class=\"token operator\">-</span>compatibility<span class=\"token operator\">:</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>這些就是 webpack 中的 <em>core-concept</em> ，理解它們才能理解 webpack 究竟幫忙做了哪些事，那我們開始吧：</p>\n<hr>\n<h3>Entry</h3>\n<p>引入自<a href=\"https://webpack.js.org/concepts\">官方文件</a></p>\n<blockquote>\n<p>An <strong>entry point</strong> indicates which module webpack should use to begin building out its internal <a href=\"https://webpack.js.org/concepts/dependency-graph/\">dependency graph</a>.</p>\n</blockquote>\n<p>入口點(<em>entry point</em>) 指示 <em>webpack</em> 以哪個檔案 (module) 作為打包( <em>bundle</em> )的位置。你可以透過 <code class=\"language-text\">entry</code> 這個屬性去自定義打包路徑。它分為<em>單一路徑</em> 跟<em>多路徑</em></p>\n<h4>單一路徑設定：</h4>\n<ol>\n<li><code class=\"language-text\">string</code></li>\n<li><code class=\"language-text\">array</code></li>\n<li><code class=\"language-text\">object</code> (<strong>也能設定多路徑</strong>)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//obj</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">main</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./path/to/my/entry/file.js\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">//string</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/src/index.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">//array</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"./src/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p><strong>注意</strong>：當你沒有設定時，預設產生的打包路徑為：<code class=\"language-text\">./src/index.js</code></p>\n</blockquote>\n<p><a href=\"https://webpack.js.org/concepts/entry-points/#single-entry-shorthand-syntax\">https://webpack.js.org/concepts/entry-points/#single-entry-shorthand-syntax</a></p>\n<hr>\n<h3>Output</h3>\n<p><strong>決定打包(bundle)內容的輸出位置</strong>，以及如何命名被打包的檔案們，你可以透過 <code class=\"language-text\">output</code> 屬性去客製化內容。</p>\n<p><code class=\"language-text\">webpack.config.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>export <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"dist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p><strong>注意</strong>：</p>\n<ol>\n<li>當你沒有設定時，預設輸出路徑為：<code class=\"language-text\">/dist/main.js</code></li>\n</ol>\n</blockquote>\n<hr>\n<h3>Loader</h3>\n<p>要知道 #webpack 本身只能編譯 JavaScript 跟 JSON 檔案類型，但在後面的筆記你會發現：連 <em>css</em> , <em>png/jpg</em> 等等都被打包，這就是透過 <em>loader</em> 來達成。</p>\n<p><em>loader</em> 會把這些檔案轉換為<strong>有效的模組檔案</strong> 以方便被裝入打包，你可透過 <code class=\"language-text\">loader</code> 去自定義，它內部包含兩種屬性：</p>\n<ol>\n<li><code class=\"language-text\">test</code> ：符合 <code class=\"language-text\">test</code> 內容的檔案會被丟入轉換的 <em>loader</em></li>\n<li><code class=\"language-text\">use</code>：實際轉換的 <em>loader</em> ，常見的有<em>babel-loader</em> , <em>sass-loader</em></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>export <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"dist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel-loader\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>在變更專案的打包工具要注意：並不是每個打包工具都像 webpack 能將任何透過 <code class=\"language-text\">import</code> 方式傳入的資料內容打包</p>\n</blockquote>\n<hr>\n<h3>Plugins</h3>\n<p><a href=\"https://webpack.js.org/concepts\">https://webpack.js.org/concepts</a></p>\n<hr>\n<h3>Mode</h3>\n<p>透過<code class=\"language-text\">mode</code>參數去使用 <em>webpack</em> 內建的==環境參數==，有 <code class=\"language-text\">production</code>,<code class=\"language-text\">development</code>,<code class=\"language-text\">none</code></p>\n<blockquote>\n<p><strong>production / development / none</strong> 代表意思：</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>export <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"dist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel-loader\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">\"development\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>預設值為 <code class=\"language-text\">production</code></p>\n</blockquote>\n<hr>\n<h3>參考資料:</h3>\n<ol>\n<li><a href=\"https://medium.com/the-messiah-code-%E7%A5%9E%E7%A2%BC%E6%8A%80%E8%A1%93%E5%85%B1%E7%AD%86/%E6%B7%BA%E8%AB%87-bundle-webpack%E8%88%87vue-cli-c2eda4a3cda3\">淺談 Bundle、與 Vue-CLI</a></li>\n</ol>","frontmatter":{"title":"Webpack 核心概念","date":"November 15, 2022","description":"webpack 是一個靜態模組打包工具，它的功用是把前端開發時用到的諸多靜態資源（如 JavaScript、CSS 和圖片等檔案）進行打包(bundle)。"}},"previous":null,"next":{"fields":{"slug":"/internet-basic/"},"frontmatter":{"title":"網際網路基本"}}},"pageContext":{"id":"7a7465e8-7348-5800-96f4-9122a91b52fc","previousPostId":null,"nextPostId":"e8473dc9-879d-5f31-88d3-b99d204be053"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}